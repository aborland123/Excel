import streamlit as st


## TO DO
## update names of everything
## Add the final 5 boxes

st.set_page_config(page_title="Cost Tool", layout="centered")

st.title("Carbon Capture Cost Analysis Tool")

#Changing the font sizing of the captions like "Lower Bound"
st.markdown(
    """
    <style>
      /* Only shrink the captions, leaving everything else alone */
      div[data-testid="stCaptionContainer"] > p {
        font-size: 0.68rem !important;
        line-height: 1 !important;
        margin: 0 !important;
        padding: 0 !important;
      }
    </style>
    """,
    unsafe_allow_html=True
)

# Changing the font sizing of the labels like "FCR", "Capacity Factor", etc to match "Flue Gas"
st.markdown(
    """
    <style>
      /* Only shrink the captions, leaving everything else alone */
      div[data-testid="stMarkdownContainer"] > p {
        font-size: 0.86rem !important;
        line-height: 4 !important;
        margin: 0 !important;
        padding: 4 !important;
      }
    </style>
    """,
    unsafe_allow_html=True
)


# Changing the style of the buttons 
st.markdown(
    """
    <style>
      /* Base styling for all st.button widgets */
      div[data-testid="stButton"] > button {
        background-color: #F37008 !important;
        color: #FFF !important;
        border: none !important;
        max-width: 200px !important;
        width: auto !important;
        padding: 0.2rem 0.5rem !important;
        min-height: 2.6rem !important;
        height: 2.6rem !important;
        font-size: 0.80rem !important;
        border-radius: 0.9rem !important;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15) !important;
        transition: transform 0.2s ease, box-shadow 0.2s ease !important;
        outline: none !important;              /* kill any default focus outline */
      }

    </style>
    """,
    unsafe_allow_html=True,
)


#st.markdown("### Calculation Inputs")
col1, col2, col3 = st.columns(3)
with col1:
    flue_gas = st.text_input("Flue Gas", placeholder="e.g., NGCC")
with col2:
    flue_gas_flow_rate_after_dcc = st.number_input("Flue gas flow rate (after DCC) (kg/hr)", value=3889654)
with col3:
    l_g = st.number_input("L/G (kg/kg)", value=1.13)
    

col1, col2, col3 = st.columns(3)
with col1:
    co2_capture_rate = st.number_input("CO₂ Capture Rate (%)", value=90)
with col2:
    cost_index = st.selectbox("Cost Index", ["2018 Dec", "2018 Nov",])
with col3: 
    st.write("FCR")
    lb, base, ub = col3.columns(3)

    with lb:
        fcr_lower_bound = st.number_input(label="", value=0.05, min_value=0.00000, label_visibility="collapsed")
        st.caption("Lower Bound")

    with base:
        fcr_baseline = st.number_input(label="", value=0.0707, min_value=0.00000, format="%.4f", label_visibility="collapsed")
        st.caption("Baseline")

    with ub:
        fcr_upper_bound = st.number_input(label="",value=0.15, min_value=0.00000, label_visibility="collapsed")
        st.caption("Upper Bound")




col1, col2, col3 = st.columns(3)
with col1: 
    st.write("Capacity Factor (%)")
    lb, base, ub = col1.columns(3)

    with lb:
        cf_lower_bound = st.number_input(label="", value=50, min_value=0, label_visibility="collapsed")
        st.caption("Lower Bound")

    with base:
        cf_baseline = st.number_input(label="", value=85, min_value=0, label_visibility="collapsed")
        st.caption("Baseline")

    with ub:
        cf_upper_bound = st.number_input(label="",value=95, min_value=0, label_visibility="collapsed")
        st.caption("Upper Bound")

with col2: 
    st.write("NG Price ($/MMBtu)")
    lb, base, ub = col2.columns(3)

    with lb:
        ng_lower_bound = st.number_input(label="", value=1.3, min_value=0.0000, label_visibility="collapsed")
        st.caption("Lower Bound")

    with base:
        ng_baseline = st.number_input(label="", value=4.42, min_value=0.00, label_visibility="collapsed")
        st.caption("Baseline")

    with ub:
        ng_upper_bound = st.number_input(label="",value=9.4, min_value=0.0, label_visibility="collapsed")
        st.caption("Upper Bound")

with col3: 
    st.write("Solvent unit price ($/ton)")
    lb, base, ub = col3.columns(3)

    with lb:
        sol_lower_bound = st.number_input(label="", value=550, min_value=0, label_visibility="collapsed")
        st.caption("Lower Bound")

    with base:
        sol_baseline = st.number_input(label="", value=1_040, min_value=0, label_visibility="collapsed")
        st.caption("Baseline")

    with ub:
        sol_upper_bound = st.number_input(label="",value=10_400, min_value=0, label_visibility="collapsed")
        st.caption("Upper Bound")

# Making Space
st.write("")  
st.write("")  

# For the two buttons and the logic 
left, center, right = st.columns([1, 2, 1])
with center:
    btn1_col, btn2_col = st.columns(2, gap="small")
    with btn1_col:
        if st.button("Calculate"):
            # logic will come in later
            st.write("Running calculation…")
    with btn2_col:
        if st.button("Calculate Sensitivity"):
            # logic will come in later
            st.write("Running sensitivity…")
